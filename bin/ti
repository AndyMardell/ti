#!/usr/bin/env python
"""
ti is a simple and extensible time tracker for the command line. Visit the
project page (http://ti.sharats.me) for more details.

Usage:
  ti (o|on) <name> [<time>...]
  ti (f|fin) [<time>...]
  ti (s|status)
  ti (t|tag) <tag>...
  ti (n|note) <note-text>...
  ti (l|log) [today]
  ti (e|edit)
  ti (i|interrupt)
  ti --no-color
  ti -h | --help

Options:
  -h --help         Show this help.
  <start-time>...   A time specification (goto http://ti.sharats.me for more on
                    this).
  <tag>...          Tags can be made of any characters, but its probably a good
                    idea to avoid whitespace.
  <note-text>...    Some arbitrary text to be added as `notes` to the currently
                    working project.
"""

from __future__ import print_function
import sys
import ti
import os

try:
    store = ti.time_store.JsonStore(os.getenv('SHEET_FILE', None) or
                                 os.path.expanduser('~/.ti-sheet'))
    fn, args = ti.parse_args()
    #fn(**args)
    fn.execute_action(store, args)
except ti.TIError as e:
    msg = str(e) if len(str(e)) > 0 else __doc__
    print(msg, file=sys.stderr)
    sys.exit(1)
